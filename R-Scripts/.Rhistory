2+3
q
q()
ls(pattern = "O")
debug(ls)
ls(pattern = "O")
cube <- read.csv("~/GIT/R/cube.r")
viewData(cube)
set.seed(31);
heightsCM = rnorm(30,mean=188, sd=5);
weightsK = rnorm(30,mean=84,sd=3);
hasDaughter = sample(c(TRUE,FALSE),size=30,replace=T);
dataFrame = data.frame(heightsCM,weightsK,hasDaughter);
rstudio::viewData(dataFrame)
dataFrameSubset <- dataFrame[heightsCM > 188]
dataFrameSubset <- dataFrame[dataFrame$heightsCM > 188]
dataFrameSubset <- dataFrame[dataFrame$heightsCM > 188,]
mean(dataFrameSubset$weightsK)
set.seed(41)
cauchyValues <- rcauchy(100)
set.seed(415)
sampCauchyValues <- sample(cauchyValues, 10, replace=TRUE)
sampCauchyValues
setwd("~/GIT/android/BumpBump/R-Scripts")
readSensors <- function(timeStamp) {
ts = toString(timeStamp)
orinames <- c('j1', 'time', 'j2', 'ox', 'oy', 'oz')
accnames <- c('j1', 'time', 'j2', 'ax', 'ay', 'az')
eventnames <- c('idx', 'time')
ori <- read.table(paste(ts, "ORIENTATION.txt", sep="_"), col.names = orinames, sep="")
acc <- read.table(paste(ts, "ACCELEROMETER.txt", sep="_"), col.names = accnames, sep="")
evt <- read.table(paste(ts, "KeyEvent.txt", sep="_"), col.names = eventnames, sep="")
m <- ori[(abs(ori$time-acc$time)<10),]
n <- acc[(abs(ori$time-acc$time)<10),]
x <- data.frame(I(m$time),m$ox,m$oy,m$oz,n$ax,n$ay,n$az)
# Finally, make the obtained data equally spaced in time
diffx <- vector(mode="numeric", length=length(x$m.time))
for(i in 2:length(diffx)) {
diffx[i] <- x$m.time[i] - x$m.time[i-1]
}
diffx[1] = diffx[2]
modX <- x[diffx<=mean(diffx), ]
return(modX);
}
# Following are the main results of the analysis of accelerometer and orientation sensors:
# * Orientation along 'x' provides the direction of the car along the road
# * Orientation along 'y' provides the lateral variation of the car along the road (ideally NIL)
# * Orientation along 'z' provides the altitude variation of the car along the road
# * Acceleration along 'x' provides the acceleration/deceleration of the car along the road
# * Acceleration along 'y' provides the lateral acceleration/deceleration of the car (ideally NIL)
# * Acceleration along 'z' provides the vertical motion of the car (clear indicates road unevenness)
processEvents <- function (x, madparam=10, midval=median(x$n.az), midvalUse=TRUE) {
# If direction (filtered to remove noise) stays same and the acceleration along z-axis has a large
# disturbance and acceleration along x-axis has decreased and then slowly increased, this indicates
# a possible bad-road condition. We create a vector of this event
# Filter the direction data
# Find standard deviation of acceleration along z-axis
mdx <- vector(mode="numeric", length=length(x$m.time))
if(midvalUse == TRUE) {
for(i in 1:length(mdx)) {
if(i < madparam)
mdx[i] <- mad(x$n.az[1:i],center=midval)
else
mdx[i] <- mad(x$n.az[(i-madparam+1):i], center=midval)
}
}
else
{
for(i in 1:length(mdx)) {
if(i < madparam)
mdx[i] <- mad(x$n.az[1:i])
else
mdx[i] <- mad(x$n.az[(i-madparam+1):i])
}
}
# Compute velocity along x-axis
# Create a bump-vector based on the above data
bvec = vector(mode="logical", length=length(mdx))
mad_mdx = mad(mdx)
for(i in 2:length(mdx)) {
if(abs(mdx[i]-mdx[i-1]) > mad_mdx) {
bvec[i] = TRUE
}
}
bvec[1] = FALSE
# Return final vector
return (bvec)
}
# Plot everything about z
#z <- readSensors('08.18.06.45');
#z <- readSensors('08.18.23.06');
#z <- readSensors('08.18.57.08');
z <- readSensors('10.11.19.33');
bumps <- processEvents(z, madparam=20, midvalUse=TRUE)
par(mfrow=c(3,2), mar=c(3,2,2,2))
plot(z$m.time, z$m.ox, type='l', main="orientation along X")
plot(z$m.time, z$n.ax, type='l', main="acceleration along X")
plot(z$m.time, z$n.az, type='l', main="acceleration along Z")
plot(z$m.time, z$m.oz, type='l', main="orientation along Z")
plot(z$m.time, bumps, type='l', main="Probable Bumps")
plot(x$m.time, type='l', main="time")
par(mfrow=c(3,2), mar=c(3,2,2,2))
plot(z$m.time, z$m.ox, type='l', main="orientation along X")
plot(z$m.time, z$n.ax, type='l', main="acceleration along X")
plot(z$m.time, z$n.az, type='l', main="acceleration along Z")
plot(z$m.time, z$m.oz, type='l', main="orientation along Z")
plot(z$m.time, bumps, type='l', main="Probable Bumps")
plot(z$m.time, type='l', main="time")
par(mfrow=c(1,1), mar=c(3,2,2,2))
plot(z$m.time[50000:100000], type='l', main="time")
plot(z$m.time[50000:70000], type='l', main="time")
par(mfrow=c(3,2), mar=c(3,2,2,2))
plot(z$m.time, z$m.ox, type='l', main="orientation along X")
plot(z$m.time, z$n.ax, type='l', main="acceleration along X")
plot(z$m.time, z$n.az, type='l', main="acceleration along Z")
plot(z$m.time, z$m.oz, type='l', main="orientation along Z")
plot(z$m.time, bumps, type='l', main="Probable Bumps")
plot(z$m.time, type='l', main="time")
# Plot everything about z
#z <- readSensors('08.18.06.45');
#z <- readSensors('08.18.23.06');
#z <- readSensors('08.18.57.08');
z <- readSensors('10.08.24.57');
bumps <- processEvents(z, madparam=20, midvalUse=TRUE)
par(mfrow=c(3,2), mar=c(3,2,2,2))
plot(z$m.time, z$m.ox, type='l', main="orientation along X")
plot(z$m.time, z$n.ax, type='l', main="acceleration along X")
plot(z$m.time, z$n.az, type='l', main="acceleration along Z")
plot(z$m.time, z$m.oz, type='l', main="orientation along Z")
plot(z$m.time, bumps, type='l', main="Probable Bumps")
plot(z$m.time, type='l', main="time")
# Plot everything about z
#z <- readSensors('08.18.06.45');
#z <- readSensors('08.18.23.06');
#z <- readSensors('08.18.57.08');
z <- readSensors('17.08.59.40');
bumps <- processEvents(z, madparam=20, midvalUse=TRUE)
par(mfrow=c(3,2), mar=c(3,2,2,2))
plot(z$m.time, z$m.ox, type='l', main="orientation along X")
plot(z$m.time, z$n.ax, type='l', main="acceleration along X")
plot(z$m.time, z$n.az, type='l', main="acceleration along Z")
plot(z$m.time, z$m.oz, type='l', main="orientation along Z")
plot(z$m.time, bumps, type='l', main="Probable Bumps")
plot(z$m.time, type='l', main="time")
par(mfrow=c(1,1), mar=c(3,2,2,2))
plot(z$m.time, z$m.time, type='l', main="time")
plot(1:length(z$m.time), z$m.time, type='l', main="time")
rstudio::viewData(z)
plot(1:length(z$m.time), z$m.time, main="time")
z$m.time[5000]
readSensors <- function(timeStamp) {
ts = toString(timeStamp)
orinames <- c('j1', 'time', 'j2', 'ox', 'oy', 'oz')
accnames <- c('j1', 'time', 'j2', 'ax', 'ay', 'az')
eventnames <- c('idx', 'time')
ori <- read.table(paste(ts, "ORIENTATION.txt", sep="_"), col.names = orinames, sep="")
acc <- read.table(paste(ts, "ACCELEROMETER.txt", sep="_"), col.names = accnames, sep="")
evt <- read.table(paste(ts, "KeyEvent.txt", sep="_"), col.names = eventnames, sep="")
m <- ori[(abs(ori$time-acc$time)<10),]
n <- acc[(abs(ori$time-acc$time)<10),]
x <- data.frame(I(m$time),m$ox,m$oy,m$oz,n$ax,n$ay,n$az)
#   # Finally, make the obtained data equally spaced in time
#   diffx <- vector(mode="numeric", length=length(x$m.time))
#   for(i in 2:length(diffx)) {
#     diffx[i] <- x$m.time[i] - x$m.time[i-1]
#   }
#   diffx[1] = diffx[2]
#   modX <- x[diffx<=mean(diffx), ]
#
#   return(modX);
return (x)
}
# Plot everything about z
#z <- readSensors('08.18.06.45');
#z <- readSensors('08.18.23.06');
#z <- readSensors('08.18.57.08');
z <- readSensors('17.08.59.40');
bumps <- processEvents(z, madparam=20, midvalUse=TRUE)
par(mfrow=c(3,2), mar=c(3,2,2,2))
plot(z$m.time, z$m.ox, type='l', main="orientation along X")
plot(z$m.time, z$n.ax, type='l', main="acceleration along X")
plot(z$m.time, z$n.az, type='l', main="acceleration along Z")
plot(z$m.time, z$m.oz, type='l', main="orientation along Z")
plot(z$m.time, bumps, type='l', main="Probable Bumps")
plot(z$m.time, type='l', main="time")
readSensors <- function(timeStamp) {
ts = toString(timeStamp)
orinames <- c('j1', 'time', 'j2', 'ox', 'oy', 'oz')
accnames <- c('j1', 'time', 'j2', 'ax', 'ay', 'az')
eventnames <- c('idx', 'time')
ori <- read.table(paste(ts, "ORIENTATION.txt", sep="_"), col.names = orinames, sep="")
acc <- read.table(paste(ts, "ACCELEROMETER.txt", sep="_"), col.names = accnames, sep="")
evt <- read.table(paste(ts, "KeyEvent.txt", sep="_"), col.names = eventnames, sep="")
m <- ori[(abs(ori$time-acc$time)<10),]
n <- acc[(abs(ori$time-acc$time)<10),]
x <- data.frame((m$time),m$ox,m$oy,m$oz,n$ax,n$ay,n$az)
#   # Finally, make the obtained data equally spaced in time
#   diffx <- vector(mode="numeric", length=length(x$m.time))
#   for(i in 2:length(diffx)) {
#     diffx[i] <- x$m.time[i] - x$m.time[i-1]
#   }
#   diffx[1] = diffx[2]
#   modX <- x[diffx<=mean(diffx), ]
#
#   return(modX);
return (x)
}
# Plot everything about z
#z <- readSensors('08.18.06.45');
#z <- readSensors('08.18.23.06');
#z <- readSensors('08.18.57.08');
z <- readSensors('17.08.59.40');
bumps <- processEvents(z, madparam=20, midvalUse=TRUE)
par(mfrow=c(3,2), mar=c(3,2,2,2))
plot(z$m.time, z$m.ox, type='l', main="orientation along X")
plot(z$m.time, z$n.ax, type='l', main="acceleration along X")
plot(z$m.time, z$n.az, type='l', main="acceleration along Z")
plot(z$m.time, z$m.oz, type='l', main="orientation along Z")
plot(z$m.time, bumps, type='l', main="Probable Bumps")
plot(z$m.time, type='l', main="time")
rstudio::viewData(z)
setwd("~/GIT/android/BumpBump/R-Scripts")
# Plot everything about z
#z <- readSensors('08.18.06.45');
#z <- readSensors('08.18.23.06');
#z <- readSensors('08.18.57.08');
z <- readSensors('17.08.59.40');
bumps <- processEvents(z, madparam=20, midvalUse=TRUE)
par(mfrow=c(3,2), mar=c(3,2,2,2))
plot(z$m.time, z$m.ox, type='l', main="orientation along X")
plot(z$m.time, z$n.ax, type='l', main="acceleration along X")
plot(z$m.time, z$n.az, type='l', main="acceleration along Z")
plot(z$m.time, z$m.oz, type='l', main="orientation along Z")
plot(z$m.time, bumps, type='l', main="Probable Bumps")
plot(z$m.time, type='l', main="time")
# Plot everything about z
#z <- readSensors('08.18.06.45');
#z <- readSensors('08.18.23.06');
#z <- readSensors('08.18.57.08');
z <- readSensors('17.08.59.40');
bumps <- processEvents(z, madparam=20, midvalUse=TRUE)
par(mfrow=c(3,2), mar=c(3,2,2,2))
plot(z$m.time, z$m.ox, type='l', main="orientation along X")
plot(z$m.time, z$n.ax, type='l', main="acceleration along X")
plot(z$m.time, z$n.az, type='l', main="acceleration along Z")
plot(z$m.time, z$m.oz, type='l', main="orientation along Z")
plot(z$m.time, bumps, type='l', main="Probable Bumps")
plot(z$m.time, type='l', main="time")
rstudio::viewData(z)
readSensors <- function(timeStamp) {
ts = toString(timeStamp)
orinames <- c('j1', 'time', 'j2', 'ox', 'oy', 'oz')
accnames <- c('j1', 'time', 'j2', 'ax', 'ay', 'az')
eventnames <- c('idx', 'time')
ori <- read.table(paste(ts, "ORIENTATION.txt", sep="_"), col.names = orinames, sep="")
acc <- read.table(paste(ts, "ACCELEROMETER.txt", sep="_"), col.names = accnames, sep="")
evt <- read.table(paste(ts, "KeyEvent.txt", sep="_"), col.names = eventnames, sep="")
m <- ori[(abs(ori$time-acc$time)<10),]
n <- acc[(abs(ori$time-acc$time)<10),]
x <- data.frame(I(m$time),m$ox,m$oy,m$oz,n$ax,n$ay,n$az)
# Finally, make the obtained data equally spaced in time
diffx <- vector(mode="numeric", length=length(x$m.time))
for(i in 2:length(diffx)) {
diffx[i] <- x$m.time[i] - x$m.time[i-1]
}
diffx[1] = diffx[2]
modX <- x[diffx<=mean(diffx), ]
return(modX);
}
# Plot everything about z
#z <- readSensors('08.18.06.45');
#z <- readSensors('08.18.23.06');
#z <- readSensors('08.18.57.08');
z <- readSensors('17.08.59.40');
bumps <- processEvents(z, madparam=20, midvalUse=TRUE)
par(mfrow=c(3,2), mar=c(3,2,2,2))
plot(z$m.time, z$m.ox, type='l', main="orientation along X")
plot(z$m.time, z$n.ax, type='l', main="acceleration along X")
plot(z$m.time, z$n.az, type='l', main="acceleration along Z")
plot(z$m.time, z$m.oz, type='l', main="orientation along Z")
plot(z$m.time, bumps, type='l', main="Probable Bumps")
plot(z$m.time, type='l', main="time")
readSensors <- function(timeStamp) {
ts = toString(timeStamp)
orinames <- c('j1', 'time', 'j2', 'ox', 'oy', 'oz')
accnames <- c('j1', 'time', 'j2', 'ax', 'ay', 'az')
eventnames <- c('idx', 'time')
ori <- read.table(paste(ts, "ORIENTATION.txt", sep="_"), col.names = orinames, sep="")
acc <- read.table(paste(ts, "ACCELEROMETER.txt", sep="_"), col.names = accnames, sep="")
evt <- read.table(paste(ts, "KeyEvent.txt", sep="_"), col.names = eventnames, sep="")
m <- ori[(abs(ori$time-acc$time)<10),]
n <- acc[(abs(ori$time-acc$time)<10),]
x <- data.frame(I(m$time),m$ox,m$oy,m$oz,n$ax,n$ay,n$az)
#   # Finally, make the obtained data equally spaced in time
#   diffx <- vector(mode="numeric", length=length(x$m.time))
#   for(i in 2:length(diffx)) {
#     diffx[i] <- x$m.time[i] - x$m.time[i-1]
#   }
#   diffx[1] = diffx[2]
#   modX <- x[diffx<=mean(diffx), ]
#
#   return(modX);
return(x)
}
# Plot everything about z
#z <- readSensors('08.18.06.45');
#z <- readSensors('08.18.23.06');
#z <- readSensors('08.18.57.08');
z <- readSensors('17.08.59.40');
bumps <- processEvents(z, madparam=20, midvalUse=TRUE)
par(mfrow=c(3,2), mar=c(3,2,2,2))
plot(z$m.time, z$m.ox, type='l', main="orientation along X")
plot(z$m.time, z$n.ax, type='l', main="acceleration along X")
plot(z$m.time, z$n.az, type='l', main="acceleration along Z")
plot(z$m.time, z$m.oz, type='l', main="orientation along Z")
plot(z$m.time, bumps, type='l', main="Probable Bumps")
plot(z$m.time, type='l', main="time")
# Plot everything about z
#z <- readSensors('08.18.06.45');
#z <- readSensors('08.18.23.06');
#z <- readSensors('08.18.57.08');
z <- readSensors('17.09.31.58');
bumps <- processEvents(z, madparam=20, midvalUse=TRUE)
par(mfrow=c(3,2), mar=c(3,2,2,2))
plot(z$m.time, z$m.ox, type='l', main="orientation along X")
plot(z$m.time, z$n.ax, type='l', main="acceleration along X")
plot(z$m.time, z$n.az, type='l', main="acceleration along Z")
plot(z$m.time, z$m.oz, type='l', main="orientation along Z")
plot(z$m.time, bumps, type='l', main="Probable Bumps")
plot(z$m.time, type='l', main="time")
# Plot everything about z
#z <- readSensors('08.18.06.45');
#z <- readSensors('08.18.23.06');
#z <- readSensors('08.18.57.08');
z <- readSensors('17.09.46.10');
bumps <- processEvents(z, madparam=20, midvalUse=TRUE)
par(mfrow=c(3,2), mar=c(3,2,2,2))
plot(z$m.time, z$m.ox, type='l', main="orientation along X")
plot(z$m.time, z$n.ax, type='l', main="acceleration along X")
plot(z$m.time, z$n.az, type='l', main="acceleration along Z")
plot(z$m.time, z$m.oz, type='l', main="orientation along Z")
plot(z$m.time, bumps, type='l', main="Probable Bumps")
plot(z$m.time, type='l', main="time")
# Plot everything about z
#z <- readSensors('08.18.06.45');
#z <- readSensors('08.18.23.06');
#z <- readSensors('08.18.57.08');
z <- readSensors('17.10.01.44');
bumps <- processEvents(z, madparam=20, midvalUse=TRUE)
par(mfrow=c(3,2), mar=c(3,2,2,2))
plot(z$m.time, z$m.ox, type='l', main="orientation along X")
plot(z$m.time, z$n.ax, type='l', main="acceleration along X")
plot(z$m.time, z$n.az, type='l', main="acceleration along Z")
plot(z$m.time, z$m.oz, type='l', main="orientation along Z")
plot(z$m.time, bumps, type='l', main="Probable Bumps")
plot(z$m.time, type='l', main="time")
# Plot everything about z
#z <- readSensors('08.18.06.45');
#z <- readSensors('08.18.23.06');
#z <- readSensors('08.18.57.08');
z <- readSensors('17.10.05.45');
bumps <- processEvents(z, madparam=20, midvalUse=TRUE)
par(mfrow=c(3,2), mar=c(3,2,2,2))
plot(z$m.time, z$m.ox, type='l', main="orientation along X")
plot(z$m.time, z$n.ax, type='l', main="acceleration along X")
plot(z$m.time, z$n.az, type='l', main="acceleration along Z")
plot(z$m.time, z$m.oz, type='l', main="orientation along Z")
plot(z$m.time, bumps, type='l', main="Probable Bumps")
plot(z$m.time, type='l', main="time")
# Plot everything about z
#z <- readSensors('08.18.06.45');
#z <- readSensors('08.18.23.06');
#z <- readSensors('08.18.57.08');
z <- readSensors('17.10.43.04');
bumps <- processEvents(z, madparam=20, midvalUse=TRUE)
par(mfrow=c(3,2), mar=c(3,2,2,2))
plot(z$m.time, z$m.ox, type='l', main="orientation along X")
plot(z$m.time, z$n.ax, type='l', main="acceleration along X")
plot(z$m.time, z$n.az, type='l', main="acceleration along Z")
plot(z$m.time, z$m.oz, type='l', main="orientation along Z")
plot(z$m.time, bumps, type='l', main="Probable Bumps")
plot(z$m.time, type='l', main="time")
# Plot everything about z
#z <- readSensors('08.18.06.45');
#z <- readSensors('08.18.23.06');
#z <- readSensors('08.18.57.08');
z <- readSensors('17.10.54.09');
bumps <- processEvents(z, madparam=20, midvalUse=TRUE)
par(mfrow=c(3,2), mar=c(3,2,2,2))
plot(z$m.time, z$m.ox, type='l', main="orientation along X")
plot(z$m.time, z$n.ax, type='l', main="acceleration along X")
plot(z$m.time, z$n.az, type='l', main="acceleration along Z")
plot(z$m.time, z$m.oz, type='l', main="orientation along Z")
plot(z$m.time, bumps, type='l', main="Probable Bumps")
plot(z$m.time, type='l', main="time")
# Plot everything about z
#z <- readSensors('08.18.06.45');
#z <- readSensors('08.18.23.06');
#z <- readSensors('08.18.57.08');
z <- readSensors('17.10.56.49');
bumps <- processEvents(z, madparam=20, midvalUse=TRUE)
par(mfrow=c(3,2), mar=c(3,2,2,2))
plot(z$m.time, z$m.ox, type='l', main="orientation along X")
plot(z$m.time, z$n.ax, type='l', main="acceleration along X")
plot(z$m.time, z$n.az, type='l', main="acceleration along Z")
plot(z$m.time, z$m.oz, type='l', main="orientation along Z")
plot(z$m.time, bumps, type='l', main="Probable Bumps")
plot(z$m.time, type='l', main="time")
# Plot everything about z
#z <- readSensors('08.18.06.45');
#z <- readSensors('08.18.23.06');
#z <- readSensors('08.18.57.08');
z <- readSensors('17.11.25.05');
bumps <- processEvents(z, madparam=20, midvalUse=TRUE)
par(mfrow=c(3,2), mar=c(3,2,2,2))
plot(z$m.time, z$m.ox, type='l', main="orientation along X")
plot(z$m.time, z$n.ax, type='l', main="acceleration along X")
plot(z$m.time, z$n.az, type='l', main="acceleration along Z")
plot(z$m.time, z$m.oz, type='l', main="orientation along Z")
plot(z$m.time, bumps, type='l', main="Probable Bumps")
plot(z$m.time, type='l', main="time")
